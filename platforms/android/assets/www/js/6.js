webpackJsonp([6],{"+FXs":function(t,i,e){t.exports=e.p+"img/commom_checked@2x.png"},"5PcC":function(t,i,e){t.exports=e.p+"img/pic-sample-2-s-selected@2x.png"},MWsV:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAADVJREFUWAnt0EENADAMA7Gu/BGGzCaNRD4OgYt8ktwpbovtn3aAAAECBAgQIECAAAECBAgQeFAdA83XA/2cAAAAAElFTkSuQmCC"},UKG1:function(t,i,e){"use strict";function s(t){w||(e("foSF"),e("UMnR"))}Object.defineProperty(i,"__esModule",{value:!0});var n=e("Xxa5"),a=e.n(n),c=e("exGp"),r=e.n(c),o=e("mvHQ"),l=e.n(o),m=e("63CM"),h=e("5Qen"),g=e("Ty/O"),v=(m.a,{name:"activity-transmit",directives:{TransferDom:m.a},data:function(){return{showPrice:!1,purchPrice:0,addPurchPrice:0,singleImg:!1,tempList:[],info:{picPathsList:[]},shareImgList:[],priceList:[],showImgList:[],composeList:[],checkValue:"",curType:"allImg",all:!0,imgBs64:[],imgAndRemark:[],base64:"",imgbs64Share:[],indexList:[0],index:0,picPathsList:[],bgSrc:e("1kUF"),isSingle:!1}},watch:{showPrice:function(t){t?-1!=this.info.remark.indexOf("\n现价")?this.info.remark=this.info.remark.split("\n现价")[0]+"\n现价：¥"+this.showPrice():this.info.remark+="\n现价：¥"+this.getTotalPrice():this.info.remark=this.info.remark.split("\n现价")[0],this.imgAndRemark=[{imgList:this.imgBs64,remark:this.info.remark}]},purchPrice:function(t){this.showPrice&&(this.info.remark=this.info.remark.split("\n现价")[0]+"\n现价：¥"+this.getTotalPrice(),this.imgAndRemark=[{imgList:this.imgBs64,remark:this.info.remark}])},addPurchPrice:function(t){this.showPrice&&(this.purchPrice=1*this.info.purchaseCost,this.purchPrice=1*this.purchPrice+1*this.addPurchPrice,console.log(this.purchPrice))}},computed:{isAll:function(){var t=!1;return this.tempList.map(function(i){i.check||(t=!0)}),this.all=!t,this.all}},methods:{getH5UserPurchases:function(){var t=this,i={userId:this.$store.getters.userInfo.id};Object(h.m)(i).then(function(i){0===i.code&&(t.priceList=i.data.userPurchaseResponses)})},selectAll:function(){var t=this;this.all=!this.all,this.tempList.map(function(i){t.$set(i,"check",t.all)}),this.setShareImgList()},select:function(t){this.$set(t,"check",!t.check),this.setShareImgList()},compose:function(){if(this.singleImg=!1,this.curType="compose",this.picPathsList.length<4)return this.$vux.toast.text("请选择至少有四张图片的商品合成");this.composeList=[{src:e("q6Pc"),check:!0},{src:e("5PcC"),check:!1},{src:e("fHpX"),check:!1}],this.showImgList=[{src:e("q6Pc")},{src:e("5PcC")},{src:e("fHpX")}],this.setShareImgList()},allImg:function(){var t=this;this.singleImg=!1,this.showImgList=this.info.picPathsList,this.tempList=JSON.parse(l()(this.info.picPathsList)),this.tempList.map(function(i){t.$set(i,"check",!i.check)}),this.curType="allImg",console.log(this.tempList,"allImg"),this.setShareImgList()},showImg:function(t){this.$store.commit("setPreviewerInfo",{imgList:this.showImgList,currentIndex:t,time:(new Date).getTime()})},firstImg:function(){this.singleImg=!0,this.showImgList=this.tempList=[this.info.picPathsList[0]],this.curType="firstImg",this.setShareImgList()},getTotalPrice:function(){var t=this.info.salePrice,i=this.purchPrice;return console.log(t,i),(parseFloat(t)+(i?parseFloat(i):0)).toFixed(2)},setShareImgList:function(){var t=this;"compose"!=this.curType?(this.shareImgList=[],this.imgBs64=[],this.imgAndRemark=[],this.tempList.forEach(function(i){i.check&&"firstImg"!=t.curType?t.shareImgList.push(i.src):"firstImg"==t.curType&&t.shareImgList.push(i.src)}),console.log(this.shareImgList,"img")):(this.indexList=[],this.imgAndRemark=[],this.shareImgList=[],this.composeList.forEach(function(i,e){i.check&&t.indexList.push(e)}),console.log(this.info.remark),console.log(this.indexList,"111"),this.imgAndRemark=[{imgList:this.imgBs64,remark:this.info.remark}])},transferBase64:function(t){var i=this;return r()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.imgBs64=[],e.next=3,Object(g.g)(t).then(function(t){0==t.code&&(i.imgBs64=t.data,i.imgAndRemark=[{imgList:i.imgBs64,remark:i.info.remark}],i.isSingle=!0)});case 3:case"end":return e.stop()}},e,i)}))()}},created:function(){var t=this;this.info=this.$route.query.info,console.log(this.info),this.info.remark=this.info.remark.indexOf("\n现价")>0?this.info.remark.substr(0,this.info.remark.indexOf("\n现价")):this.info.remark,this.tempList=JSON.parse(l()(this.info.picPathsList)),console.log(this.tempList,"created"),console.log(this.info.picPathsList,"created"),this.showImgList=this.info.picPathsList,this.tempList.map(function(i){t.$set(i,"check",!i.check)}),this.setShareImgList(),this.purchPrice=this.info.purchaseCost,this.info.remark||(this.info.remark=""),this.getH5UserPurchases(),this.picPathsList=JSON.parse(l()(this.info.picPathsList));var i=[];this.picPathsList.forEach(function(t,e){e<4&&i.push(t.src)}),this.transferBase64(i)}}),f=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"custom-body activity-transmit"},[e("div",{staticClass:"header"},[e("i",{staticClass:"close icon-close",on:{click:function(i){t.$router.go(-1)}}}),t._v(" "),e("div",{staticClass:"title black"},[t._v("转发"+t._s(t.$route.query.type?"商品":"活动"))])]),t._v(" "),e("div",{staticClass:"main-content"},[e("x-textarea",{staticClass:"content black",attrs:{rows:5},model:{value:t.info.remark,callback:function(i){t.$set(t.info,"remark",i)},expression:"info.remark"}}),t._v(" "),t.$route.query.type?e("div",{staticClass:"price-group gray-white-bg"},[e("div",{staticClass:"price-item black fs12"},[e("span",{staticClass:"bold"},[t._v("文案中显示现价 ")]),e("span",{staticClass:"fs10 blue-gray"},[t._v("现价=销售价+(标准代购价+额外加价)")]),t._v(" "),e("check-icon",{staticClass:"fr",attrs:{type:"plain",value:t.showPrice},on:{"update:value":function(i){t.showPrice=i}}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrice,expression:"showPrice"}],staticClass:"price-item black fs16"},[e("x-input",{attrs:{type:"number","text-align":"right",placeholder:"请输入代购价","placeholder-align":"right",title:"代购价"},model:{value:t.purchPrice,callback:function(i){t.purchPrice="string"==typeof i?i.trim():i},expression:"purchPrice"}}),t._v(" "),e("checker",{attrs:{type:"radio","default-item-class":"select-item blue-gray-bg light-gray","selected-item-class":"is-active"},model:{value:t.addPurchPrice,callback:function(i){t.addPurchPrice=i},expression:"addPurchPrice"}},t._l(t.priceList,function(i,s){return e("checker-item",{key:s,attrs:{value:i.purchaseCost}},[t._v("+￥"+t._s(i.purchaseCost)+"\n                    ")])}))],1)]):t._e(),t._v(" "),e("tab",{attrs:{"scroll-threshold":3,"custom-bar-width":"44px","line-width":2}},[e("tab-item",{attrs:{selected:""},on:{"on-item-click":t.allImg}},[t._v("多图")]),t._v(" "),e("tab-item",{on:{"on-item-click":t.firstImg}},[t._v("首图")]),t._v(" "),e("tab-item",{on:{"on-item-click":t.compose}},[t._v("合成图")])],1),t._v(" "),"allImg"==t.curType?e("div",[e("i",{class:["iconNH icon-select mgr8 mgt2",{"is-active":t.isAll}],on:{click:t.selectAll}}),t._v("全选")]):"compose"==t.curType?e("div",{staticClass:"fs10 light-gray"},[t._v("转发时将按照示例图样式合成，且“文字描述”将与上述文案一致")]):t._e(),t._v(" "),"compose"==t.curType?e("group",t._l(t.composeList,function(i,s){return e("cell",{key:s,staticClass:"compose-list"},[i.check?t._e():e("div",{staticClass:"mask",attrs:{slot:"value"},slot:"value"}),t._v(" "),e("div",{staticClass:"cover-bg-img",style:{backgroundImage:"url("+i.src+")"},attrs:{slot:"icon"},on:{click:function(i){t.showImg(s)}},slot:"icon"}),t._v(" "),0==s?e("div",{attrs:{slot:"after-title"},slot:"after-title"},[e("div",{staticClass:"mgb8 fs20 black"},[t._v("首图")]),t._v(" "),e("div",{staticClass:"fs12 light-gray"},[t._v("首图 + 文字描述")])]):1==s?e("div",{attrs:{slot:"after-title"},slot:"after-title"},[e("div",{staticClass:"mgb8 fs20 black"},[t._v("竖排四图")]),t._v(" "),e("div",{staticClass:"fs12 light-gray"},[t._v("商品的前四张图(竖排) + 文字描述")])]):2==s?e("div",{attrs:{slot:"after-title"},slot:"after-title"},[e("div",{staticClass:"mgb8 fs20 black"},[t._v("横排四图")]),t._v(" "),e("div",{staticClass:"fs12 light-gray"},[t._v("商品的前四张图(横排) + 文字描述")])]):t._e(),t._v(" "),e("div",{class:["iconNH icon-checkbox ",{" is-active":i.check}],attrs:{slot:"value"},on:{click:function(e){e.preventDefault(),t.select(i)}},slot:"value"})])})):e("ul",t._l(t.tempList,function(i,s){return e("li",{key:s,staticClass:"img-list",class:{"first-img":t.singleImg}},[e("div",{staticClass:"cover-bg-img",style:{backgroundImage:"url("+i.src+")"},on:{click:function(i){t.showImg(s)}}}),t._v(" "),"allImg"==t.curType?e("div",{staticClass:"select",on:{click:function(e){t.select(i)}}},["firstImg"!=t.curType?e("i",{class:["iconNH icon-select",{" is-active":i.check}]}):t._e()]):t._e()])}))],1),t._v(" "),e("div",{staticClass:"footer"},[e("wechat-share-bar",{attrs:{imgList:t.shareImgList,remark:t.info.remark,imgBs64:t.imgAndRemark,indexList:t.indexList,isSingle:t.isSingle}})],1)])},d=[];f._withStripped=!0;var p={render:f,staticRenderFns:d},u=p,w=!1,b=e("VU/8"),k=s,y=b(v,u,!1,k,"data-v-471f6db5",null);y.options.__file="src/views/activity/activityTransmit.vue";i.default=y.exports},UMnR:function(t,i,e){var s=e("vaKG");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("67505428",s,!1,{})},fHpX:function(t,i,e){t.exports=e.p+"img/pic-sample-3-s-selected@2x.png"},foSF:function(t,i,e){var s=e("ppbI");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("8d1684c4",s,!1,{})},ppbI:function(t,i,e){var s=e("kxFB");i=t.exports=e("FZ+f")(!1),i.push([t.i,'\n.activity-transmit .weui-icon-circle:before,.activity-transmit .weui-icon-success-circle:before{content:"";width:4.267vw;height:4.267vw;background:url('+s(e("MWsV"))+") no-repeat;background-size:contain;margin-bottom:.8vw\n}\n.activity-transmit .weui-icon-success-circle:before{background:url("+s(e("+FXs"))+") no-repeat;background-size:contain\n}\n.activity-transmit .weui-cells:after,.activity-transmit .weui-cells:before{border:none\n}",""])},q6Pc:function(t,i,e){t.exports=e.p+"img/pic-sample-1-s-selected@2x.png"},vaKG:function(t,i,e){i=t.exports=e("FZ+f")(!1),i.push([t.i,'\n.activity-transmit[data-v-471f6db5]{background-color:#fff;min-height:100%;margin-bottom:16vw;content:"viewport-units-buggyfill; margin-bottom: 16vw"\n}\n.activity-transmit .header[data-v-471f6db5]{position:relative;padding:3.467vw 0;content:"viewport-units-buggyfill; padding: 3.467vw 0"\n}\n.activity-transmit .header .close[data-v-471f6db5]{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.activity-transmit .header .title[data-v-471f6db5]{text-align:center;font-size:4.8vw;content:"viewport-units-buggyfill; font-size: 4.8vw"\n}\n.activity-transmit .main-content[data-v-471f6db5]{padding:0 5.333vw;content:"viewport-units-buggyfill; padding: 0 5.333vw"\n}\n.activity-transmit .main-content .price-group[data-v-471f6db5]{padding:0 3.2vw;margin-bottom:3.733vw;content:"viewport-units-buggyfill; padding: 0 3.2vw; margin-bottom: 3.733vw"\n}\n.activity-transmit .main-content .price-group .bold[data-v-471f6db5]{font-weight:600\n}\n.activity-transmit .main-content .price-group .price-item[data-v-471f6db5]{line-height:12.8vw;content:"viewport-units-buggyfill; line-height: 12.8vw"\n}\n.activity-transmit .main-content .price-group .price-item .weui-cell[data-v-471f6db5]{padding:0\n}\n.activity-transmit .main-content .price-group .price-item[data-v-471f6db5]:nth-child(2){border-top:1px solid #dadada\n}\n.activity-transmit .main-content .content[data-v-471f6db5]{margin-bottom:4.8vw;font-size:4.267vw;height:32vw;content:"viewport-units-buggyfill; margin-bottom: 4.8vw; font-size: 4.267vw; height: 32vw"\n}\n.activity-transmit .main-content .mgt2[data-v-471f6db5]{margin-top:-.533vw;content:"viewport-units-buggyfill; margin-top: -0.533vw"\n}\n.activity-transmit .main-content ul[data-v-471f6db5]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:4vw 0;padding:0 2.4vw;content:"viewport-units-buggyfill; margin: 4vw 0; padding: 0 2.4vw"\n}\n.activity-transmit .main-content ul li.img-list[data-v-471f6db5]{width:26.667vw;height:27.467vw;margin-bottom:2.133vw;margin-right:2.133vw;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"viewport-units-buggyfill; width: 26.667vw; height: 27.467vw; margin-bottom: 2.133vw; margin-right: 2.133vw"\n}\n.activity-transmit .main-content ul li.img-list .cover-bg-img[data-v-471f6db5]{width:100%;height:100%\n}\n.activity-transmit .main-content ul li.img-list .icon-checkbox[data-v-471f6db5]{vertical-align:center\n}\n.activity-transmit .main-content ul li.img-list .select[data-v-471f6db5]{width:13.333vw;height:13.333vw;margin-left:-13.333vw;vertical-align:center;margin-top:14.133vw;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;content:"viewport-units-buggyfill; width: 13.333vw; height: 13.333vw; margin-left: -13.333vw; margin-top: 14.133vw"\n}\n.activity-transmit .main-content ul li.img-list[data-v-471f6db5]:nth-child(3n){margin-right:0\n}\n.activity-transmit .main-content ul li.img-list.first-img[data-v-471f6db5]{width:100%;height:86.667vw;margin-right:0;content:"viewport-units-buggyfill; height: 86.667vw"\n}\n.activity-transmit .main-content .compose-list .cover-bg-img[data-v-471f6db5]{width:23.467vw;height:23.467vw;margin-right:4vw;background-size:100% 100%;content:"viewport-units-buggyfill; width: 23.467vw; height: 23.467vw; margin-right: 4vw"\n}\n.activity-transmit .main-content .compose-list .mask[data-v-471f6db5]{position:absolute;left:0;top:0;width:80vw;height:28.8vw;background-color:hsla(0,0%,100%,.5);content:"viewport-units-buggyfill; width: 80vw; height: 28.8vw"\n}\n.activity-transmit .action-group[data-v-471f6db5]{font-size:2.667vw;text-align:center;position:fixed;bottom:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:16vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;content:"viewport-units-buggyfill; font-size: 2.667vw; height: 16vw"\n}\n.activity-transmit .action-group .action-btn[data-v-471f6db5]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.activity-transmit .action-group .action-btn i[data-v-471f6db5]{display:inline-block\n}\n.activity-transmit .action-group .action-btn:last-child i[data-v-471f6db5]{color:#7a7889\n}\n.activity-transmit .action-group .divider[data-v-471f6db5]{-webkit-box-flex:0;-ms-flex:0 0 0.533vw;flex:0 0 0.533vw;height:5.867vw;content:"viewport-units-buggyfill; -ms-flex: 0 0 0.533vw; flex: 0 0 0.533vw; height: 5.867vw"\n}\n.activity-transmit .select-item[data-v-471f6db5]{font-size:2.667vw;text-align:center;min-width:24vw;padding:0 2.133vw;line-height:8vw;margin:0 .8vw 2.133vw;content:"viewport-units-buggyfill; font-size: 2.667vw; min-width: 24vw; padding: 0 2.133vw; line-height: 8vw; margin: 0 0.8vw 2.133vw"\n}\n.activity-transmit .select-item.is-active[data-v-471f6db5]{color:#fff!important;background-color:#797988\n}',""])}});
//# sourceMappingURL=6.js.map