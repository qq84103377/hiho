webpackJsonp([26],{"6KPw":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'\n.nf-scroll-container[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.nf-scroll-container .nf-scroll-view[data-v-69a0f2d3]{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.align-center[data-v-69a0f2d3],.flex[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.align-center[data-v-69a0f2d3]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.center[data-v-69a0f2d3],.justify-center[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center\n}\n.center[data-v-69a0f2d3]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.space-between[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.navigation[data-v-69a0f2d3]{height:11.733vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:99;padding:0 4.267vw;position:fixed;top:0;left:0;width:100%;background-color:#fff;border-bottom:.5px solid #d9d9d9;content:"viewport-units-buggyfill; height: 11.733vw; padding: 0 4.267vw"\n}\n.navigation .back[data-v-69a0f2d3]{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.navigation .text[data-v-69a0f2d3]{text-align:center;font-size:4.8vw;line-height:11.733vw;content:"viewport-units-buggyfill; font-size: 4.8vw; line-height: 11.733vw"\n}\n.navigation .right[data-v-69a0f2d3]{position:absolute;right:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; right: 4.267vw"\n}\n.pay .border-b[data-v-69a0f2d3]{border-bottom:1px solid #eee\n}\n.pay .brand-logo[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex;width:6.4vw;height:6.4vw;margin-right:2.667vw;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;content:"viewport-units-buggyfill; width: 6.4vw; height: 6.4vw; margin-right: 2.667vw"\n}\n.pay .brand-logo img[data-v-69a0f2d3]{width:100%;height:100%\n}\n.pay .goods-item[data-v-69a0f2d3]{border-bottom:1px solid #eee\n}\n.pay .goods-item[data-v-69a0f2d3],.pay .goods-item .check-box[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.pay .goods-item .check-box[data-v-69a0f2d3]{-webkit-box-flex:0;-ms-flex:0 0 14.4vw;flex:0 0 14.4vw;\n  /*align-items: center;*/-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"viewport-units-buggyfill; -ms-flex: 0 0 14.4vw; flex: 0 0 14.4vw"\n}\n.pay .goods-item .check-box .icon-checkbox[data-v-69a0f2d3]{margin-top:16vw;content:"viewport-units-buggyfill; margin-top: 16vw"\n}\n.pay .goods-item .goods-main[data-v-69a0f2d3]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.pay .goods-item .goods-main .goods-img[data-v-69a0f2d3]{display:block;width:21.867vw;height:21.867vw;margin-right:2.667vw;content:"viewport-units-buggyfill; width: 21.867vw; height: 21.867vw; margin-right: 2.667vw"\n}\n.pay .goods-item .goods-main .good-msg .goods-name[data-v-69a0f2d3]{font-size:3.467vw;vertical-align:top;padding-bottom:2.133vw;content:"viewport-units-buggyfill; font-size: 3.467vw; padding-bottom: 2.133vw"\n}\n.pay .goods-item .goods-main .goods-price[data-v-69a0f2d3]{font-size:3.733vw;color:#f83149;margin-top:17.067vw;content:"viewport-units-buggyfill; font-size: 3.733vw; margin-top: 17.067vw"\n}\n.pay .goods-item .goods-main .del[data-v-69a0f2d3]{position:absolute;right:5.333vw;top:10.667vw;content:"viewport-units-buggyfill; right: 5.333vw; top: 10.667vw"\n}\n.pay .goods-item .goods-main .order-remark[data-v-69a0f2d3]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:3.2vw;margin:3.2vw 4vw;padding:1.6vw 2.133vw;min-height:8vw;color:#9898a1;background-color:#fafafa;content:"viewport-units-buggyfill; font-size: 3.2vw; margin: 3.2vw 4vw; padding: 1.6vw 2.133vw; min-height: 8vw"\n}\n.pay .goods-item .goods-main .order-remark span[data-v-69a0f2d3]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.pay .goods-item .goods-main .order-remark .icon-cart-edit[data-v-69a0f2d3]{width:3.2vw;font-size:3.2vw;content:"viewport-units-buggyfill; width: 3.2vw; font-size: 3.2vw"\n}\n.pay .goods-item .goods-main .size-list[data-v-69a0f2d3]{position:relative;width:90.667vw;padding:3.2vw 2.133vw 1.333vw;margin:0 0 3.2vw -9.333vw;\n  /*margin-bottom: 12px;*/\n  /*margin: 0 auto 10px;*/background-color:#fafafa;content:"viewport-units-buggyfill; width: 90.667vw; padding: 3.2vw 2.133vw 1.333vw; margin: 0 0 3.2vw -9.333vw"\n}\n.pay .goods-item .goods-main .size-list[data-v-69a0f2d3]:before{content:"";position:absolute;z-index:2;top:-2.133vw;left:37.333vw;border-left:2.667vw solid transparent;border-right:2.667vw solid transparent;border-bottom:2.667vw solid #fafafa\n}\n.pay .goods-item .goods-main .size-list .select-item[data-v-69a0f2d3]{font-size:2.667vw;text-align:center;min-width:19.467vw;padding:0 2.133vw;line-height:8vw;margin:0 1.067vw 2.133vw;content:"viewport-units-buggyfill; font-size: 2.667vw; min-width: 19.467vw; padding: 0 2.133vw; line-height: 8vw; margin: 0 1.067vw 2.133vw"\n}\n.pay .goods-item .goods-main .size-list .select-item.is-active[data-v-69a0f2d3]{color:#fff!important;background-color:#797988\n}\n.pay .remark-textarea[data-v-69a0f2d3]{font-size:3.733vw;border:1px solid #d9d9d9;content:"viewport-units-buggyfill; font-size: 3.733vw"\n}',""])},"9Wp7":function(t,e,a){"use strict";function i(t){v||(a("Q4n+"),a("qTZB"))}Object.defineProperty(e,"__esModule",{value:!0});var s=a("c+FZ"),o=a("63CM"),n=(o.a,{name:"pay",directives:{TransferDom:o.a},data:function(){return{remark:"",isEditRemark:!1,check:{wx:!0,ali:!1},params:{},isAlreadyPay:!1,editingRemarkItem:{},isNow:0}},beforeRouteEnter:function(t,e,a){"/address"!=e.path?a(function(t){t.isNow="/cart"==e.path?0:1}):a()},beforeRouteLeave:function(t,e,a){this.isNow&&Object(s.a)({goodsSpecId:this.params.shopCartBrandUnits[0].shopCartItem[0].goodsSpecId}),a()},methods:{editRemark:function(){var t=this,e={goodsShopCartId:this.editingRemarkItem.goodsShopCartId,remark:this.remark};Object(s.c)(e).then(function(e){0===e.code&&(t.$vux.toast.show({text:"修改成功",type:"success"}),t.editingRemarkItem.remark=t.remark,t.remark="")})},showEditRemark:function(t){console.log(t),this.isEditRemark=!0,this.editingRemarkItem=t,this.remark=t.remark},buy:function(){var t=this;if(this.params.receiverInfo){var e=this;this.isAlreadyPay=!0,this.params.totalAmount=(1*this.params.totalAmount).toFixed(2),this.params.isNow=this.isNow,console.log(this.params),Object(s.j)(this.params).then(function(a){if(0===a.code){t.$store.dispatch("getCartNum",t.$store.getters.userInfo.id);var i={payMethod:t.params.payMethod,userId:t.$store.getters.userInfo.id,finPaymentId:a.data.finPaymentId,totalAmount:a.data.totalAmount};Object(s.i)(i).then(function(a){if(0===a.code&&"WX_PAY"===t.params.payMethod){if("SUCCESS"!==a.data.return_code||"SUCCESS"!==a.data.result_code)return void t.$vux.toast.show({text:"调起支付失败",type:"cancel",onHide:function(){e.isNow=0,e.$router.replace("/orderList")}});var i={appid:a.data.appid,mch_id:a.data.mch_id,prepay_id:a.data.prepay_id,nonce:a.data.finalPackage.noncestr,timestamp:a.data.finalPackage.timestamp,sign:a.data.paySign};Wechat.sendPaymentRequest(i,function(){e.$vux.toast.show({text:"支付成功",onHide:function(){e.isNow=0,e.$router.replace("/orderList")}})},function(t){e.$vux.toast.show({text:t,type:"cancel",onHide:function(){e.isNow=0,e.$router.replace("/orderList")}})})}0===a.code&&"ALI_PAY"===t.params.payMethod&&cordova.plugins.alipay.payment(a.data,function(t){e.$vux.toast.show({text:"支付成功",onHide:function(){e.isNow=0,e.$router.replace("/orderList")}})},function(t){e.$vux.toast.show({text:"支付失败",type:"cancel",onHide:function(){e.isNow=0,e.$router.replace("/orderList")}})})})}})}else this.$vux.toast.show({type:"text",text:"请先选择送货地址"})}},computed:{addressInfo:function(){return this.$store.state.user.addressInfo}},created:function(){this.params=this.$store.state.user.orderInfo,console.log(this.params,"下单信息"),this.params.payMethod="WX_PAY",this.addressInfo.userAddressId&&(this.params.receiverInfo=this.addressInfo)},activated:function(){this.addressInfo.userAddressId&&(this.params.receiverInfo?(this.params.receiverInfo.phone=this.addressInfo.phone,this.params.receiverInfo.receiverName=this.addressInfo.receiverName,this.params.receiverInfo.address=this.addressInfo.address,this.params.receiverInfo.isDefault=this.addressInfo.isDefault,this.params.receiverInfo.userAddressId=this.addressInfo.userAddressId,console.log(this.params.receiverInfo)):this.params.receiverInfo={phone:this.addressInfo.phone,receiverName:this.addressInfo.receiverName,address:this.addressInfo.address,isDefault:this.addressInfo.isDefault,userAddressId:this.addressInfo.userAddressId})}}),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-body pay"},[a("div",{staticClass:"main-content"},[a("group",[a("cell",{attrs:{link:"/address","border-intent":!1,"is-link":""}},[a("i",{staticClass:"icon-address iconNH mgr8",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),t.params.receiverInfo?a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticClass:"pdb4"},[t._v(t._s(t.params.receiverInfo.receiverName)+"："+t._s(t.params.receiverInfo.phone))]),t._v(" "),a("p",{staticClass:"fs12 light-gray"},[t._v(t._s(t.params.receiverInfo.address))])]):a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticClass:"fs12 light-gray"},[t._v("请选择送货地址")])])])],1),t._v(" "),t._l(t.params.shopCartBrandUnits,function(e,i){return a("group",{key:i},[e.shopCartItem.length>0?a("div",{staticClass:"border-b"},[a("cell",{attrs:{"border-intent":!1}},[a("div",{staticClass:"fs16",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.brandName))]),t._v(" "),a("div",{staticClass:"brand-logo",attrs:{slot:"icon"},slot:"icon"},[a("img",{attrs:{src:e.brandLogo,alt:""}})])])],1):t._e(),t._v(" "),t._l(e.shopCartItem,function(e,i){return a("div",{key:i,staticClass:"goods-item"},[a("div",{staticClass:"goods-main"},[a("cell",{staticStyle:{position:"relative"},attrs:{"border-intent":!1}},[a("div",{staticClass:"goods-img cover-bg-img",style:{backgroundImage:"url("+e.goodsImage+")"},attrs:{slot:"icon"},slot:"icon"}),t._v(" "),a("div",{staticClass:"good-msg",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"goods-name"},[t._v(t._s(e.goodsName))]),t._v(" "),a("div",{staticClass:"fs12 dark-gray pdb4"},[t._v("款式"),a("span",{staticClass:"pdl4"},[t._v(t._s(e.style))])]),t._v(" "),a("div",{staticClass:"fs12 dark-gray pdb4"},[t._v("款号"),a("span",{staticClass:"pdl4"},[t._v(t._s(e.styleNo))])]),t._v(" "),a("div",[a("x-button",{staticClass:"tag-btn select-size-btn",attrs:{mini:""}},[a("span",[t._v(t._s(e.goodsSpecName))])])],1)]),t._v(" "),a("div",{staticClass:"goods-price"},[t._v("￥"+t._s(e.salePrice))])]),t._v(" "),a("div",{staticClass:"order-remark",on:{click:function(a){t.showEditRemark(e)}}},[a("span",[t._v("备注: "+t._s(e.remark||"暂无备注"))]),t._v(" "),a("i",{staticClass:"iconNH icon-cart-edit"})])],1)])})],2)})],2),t._v(" "),a("div",{staticClass:"footer"},[a("group",[a("cell",{staticClass:"fs14 black",attrs:{title:"商品合计("+t.params.selectNum+"件)"}},[a("span",{staticClass:"price red"},[t._v("￥"+t._s((t.params.totalAmount-t.params.totalFreight).toFixed(2)))])]),t._v(" "),a("cell",{staticClass:"fs14 black",attrs:{title:"运费"}},[a("span",{staticClass:"price red"},[t._v("￥"+t._s(t.params.totalFreight))])]),t._v(" "),a("cell",{staticClass:"fs14 black",attrs:{title:"金额"}},[a("div",{staticClass:"black"},[t._v("\n                    合计:\n                    "),a("span",{staticClass:"price red"},[t._v("￥"+t._s((1*t.params.totalAmount).toFixed(2)))])])])],1),t._v(" "),a("group",[a("cell",{staticClass:"fs14 black",staticStyle:{"text-align":"center"},attrs:{title:"支付方式"}}),t._v(" "),a("cell",{staticClass:"fs16 black",attrs:{title:"微信方式"}},[a("div",{staticClass:"icon-wxpay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),a("div",{class:["icon-checkbox",{"is-active":t.check.wx}],on:{click:function(e){t.check.wx=!0,t.check.ali=!1,t.params.payMethod="WX_PAY"}}})]),t._v(" "),a("cell",{staticClass:"fs16 black",attrs:{title:"支付宝方式"}},[a("div",{staticClass:"icon-alipay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),a("div",{class:["icon-checkbox",{"is-active":t.check.ali}],on:{click:function(e){t.check.ali=!0,t.check.wx=!1,t.params.payMethod="ALI_PAY"}}})])],1),t._v(" "),t.isAlreadyPay?a("x-button",{staticClass:"full-btn",attrs:{disabled:t.isAlreadyPay,type:"primary"}},[t._v("支付中...")]):a("x-button",{staticClass:"full-btn",attrs:{type:"primary"},nativeOn:{click:function(e){return t.buy(e)}}},[t._v(t._s(t.check.wx?"微信":"支付宝")+"支付"),a("span",{staticClass:"fs14"},[t._v("￥")]),a("span",{staticClass:"fs18"},[t._v(t._s((1*t.params.totalAmount).toFixed(2)))])])],1),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("confirm",{attrs:{"dialog-transition":"",title:"修改备注"},on:{"on-confirm":t.editRemark},model:{value:t.isEditRemark,callback:function(e){t.isEditRemark=e},expression:"isEditRemark"}},[a("div",{attrs:{solt:"content"}},[a("group",[a("x-textarea",{staticClass:"remark-textarea",attrs:{max:50},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1)])],1)])},d=[];r._withStripped=!0;var l={render:r,staticRenderFns:d},c=l,v=!1,f=a("VU/8"),p=i,m=f(n,c,!1,p,"data-v-69a0f2d3",null);m.options.__file="src/views/cart/pay.vue";e.default=m.exports},"Q4n+":function(t,e,a){var i=a("f4u2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("09833991",i,!1,{})},f4u2:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"",""])},qTZB:function(t,e,a){var i=a("6KPw");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("22379b77",i,!1,{})}});
//# sourceMappingURL=26.js.map