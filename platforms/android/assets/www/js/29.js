webpackJsonp([29],{"73TT":function(t,e,i){var s=i("a0R/");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("0ef42574",s,!1,{})},Dl2t:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'\n.nf-scroll-container[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.nf-scroll-container .nf-scroll-view[data-v-39c791c4]{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.align-center[data-v-39c791c4],.flex[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.align-center[data-v-39c791c4]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.center[data-v-39c791c4],.justify-center[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center\n}\n.center[data-v-39c791c4]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.space-between[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.navigation[data-v-39c791c4]{height:11.733vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:99;padding:0 4.267vw;position:fixed;top:0;left:0;width:100%;background-color:#fff;border-bottom:.5px solid #d9d9d9;content:"viewport-units-buggyfill; height: 11.733vw; padding: 0 4.267vw"\n}\n.navigation .back[data-v-39c791c4]{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.navigation .text[data-v-39c791c4]{text-align:center;font-size:4.8vw;line-height:11.733vw;content:"viewport-units-buggyfill; font-size: 4.8vw; line-height: 11.733vw"\n}\n.navigation .right[data-v-39c791c4]{position:absolute;right:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; right: 4.267vw"\n}\n.transmit-list[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.transmit-list .main-content .item[data-v-39c791c4]{padding:3.2vw 4.267vw;content:"viewport-units-buggyfill; padding: 3.2vw 4.267vw"\n}\n.transmit-list .main-content .icon-checkbox[data-v-39c791c4]{margin-top:10.667vw;content:"viewport-units-buggyfill; margin-top: 10.667vw"\n}\n.transmit-list .main-content .goods-info[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.transmit-list .main-content .goods-info .goods-img[data-v-39c791c4]{width:21.867vw;height:21.867vw;margin-left:2.667vw;content:"viewport-units-buggyfill; width: 21.867vw; height: 21.867vw; margin-left: 2.667vw"\n}\n.transmit-list .main-content .goods-info .goods-img .mask-tip[data-v-39c791c4]{width:100%;height:100%;padding:0 2.667vw;line-height:6.4vw;text-align:center;color:#fff;background-color:rgba(0,0,0,.5);content:"viewport-units-buggyfill; padding: 0 2.667vw; line-height: 6.4vw"\n}\n.transmit-list .main-content .goods-info .goods-img .mask-tip .chinese[data-v-39c791c4]{padding-top:4vw;padding-bottom:1.067vw;border-bottom:1px solid #fff;content:"viewport-units-buggyfill; padding-top: 4vw; padding-bottom: 1.067vw"\n}\n.transmit-list .main-content .goods-info .goods-msg[data-v-39c791c4]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-left:2.667vw;content:"viewport-units-buggyfill; padding-left: 2.667vw"\n}\n.transmit-list .main-content .goods-info .goods-msg .style-no[data-v-39c791c4]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.transmit-list .main-content .goods-info .goods-msg .style-no .style[data-v-39c791c4]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.transmit-list .main-content .goods-info .goods-msg .style-no .already-tag[data-v-39c791c4]{font-size:2.667vw;padding:1.333vw 2.133vw;color:#f83149;background-color:#fceff2;content:"viewport-units-buggyfill; font-size: 2.667vw; padding: 1.333vw 2.133vw"\n}\n.transmit-list .footer[data-v-39c791c4]{height:12.8vw;padding:0 4.267vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:3.2vw;line-height:5.333vw;color:#797988;-webkit-box-shadow:inset 0 0 .8vw 0 rgba(38,47,59,.12);box-shadow:inset 0 0 .8vw 0 rgba(38,47,59,.12);content:"viewport-units-buggyfill; height: 12.8vw; padding: 0 4.267vw; font-size: 3.2vw; line-height: 5.333vw; -webkit-box-shadow: inset 0 0 0.8vw 0 rgba(38, 47, 59, .12); box-shadow: inset 0 0 0.8vw 0 rgba(38, 47, 59, .12)"\n}\n.transmit-list .footer[data-v-39c791c4],.transmit-list .price[data-v-39c791c4]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#fff\n}\n.transmit-list .price[data-v-39c791c4]{overflow-x:auto;overflow-y:hidden;padding-top:2.133vw;max-width:186.667vw;white-space:nowrap;height:12.267vw;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;content:"viewport-units-buggyfill; padding-top: 2.133vw; max-width: 186.667vw; height: 12.267vw"\n}\n.transmit-list .price span[data-v-39c791c4]{font-size:2.667vw;display:inline-block;line-height:10.133vw;margin-left:1.333vw;content:"viewport-units-buggyfill; font-size: 2.667vw; line-height: 10.133vw; margin-left: 1.333vw"\n}\n.transmit-list .price .select-item[data-v-39c791c4]{font-size:2.667vw;text-align:center;min-width:24vw;padding:0 2.133vw;line-height:8vw;margin:0 .8vw 2.133vw;content:"viewport-units-buggyfill; font-size: 2.667vw; min-width: 24vw; padding: 0 2.133vw; line-height: 8vw; margin: 0 0.8vw 2.133vw"\n}\n.transmit-list .price .select-item.is-active[data-v-39c791c4]{color:#fff!important;background-color:#797988\n}',""])},F9Y4:function(t,e,i){"use strict";function s(t){p||(i("73TT"),i("rBVL"))}Object.defineProperty(e,"__esModule",{value:!0});var n=i("pFYg"),o=i.n(n),a=i("Ty/O"),c=i("5Qen"),l=i("s/Rn"),r={name:"transmitList",data:function(){return{goodsList:[],priceList:[],selectedCount:0,type:"",purchPrice:0}},watch:{selectedCount:function(){}},methods:{getH5UserPurchases:function(){var t=this,e={userId:this.$store.getters.userInfo.id};Object(c.m)(e).then(function(e){0===e.code&&(t.priceList=e.data.userPurchaseResponses)})},refresh:function(t){t(!0),"ACTIVITY"===this.type&&this.getGoodList(t),"BRAND"===this.type&&this.getBrandDetailH5(t)},infinite:function(t){t()},getGoodList:function(t){var e=this,i={userId:this.$store.getters.userInfo.id,activityId:this.$route.query.id};Object(a.e)(i).then(function(i){console.log(i),0===i.code&&(e.goodsList=i.data,t(),console.log(e.goodsList,"ddddd"))})},getBrandDetailH5:function(t){var e=this,i={userId:this.$store.getters.userInfo.id,brandId:this.$route.query.id,flag:1,pageNum:0,pageSize:0};Object(l.a)(i).then(function(i){0===i.code&&(e.goodsList=i.data.brandGoods,e.selectedCount=0,t())})},goodsClick:function(t,e){if(this.selectedCount>=9&&!t.selected)return void this.$vux.toast.show({text:"最多只能选择9个商品",type:"text"});this.$set(this.goodsList[e],"selected",t.stockSum>0&&!t.selected),t.selected?this.selectedCount++:this.selectedCount>0&&this.selectedCount--},getTotalPrice:function(t,e,i){e=1*e+1*i;var s=1*this.purchPrice;return console.log(e,s),console.log((parseFloat(1*e)+(s?parseFloat(s):0)).toFixed(2)),(parseFloat(1*e)+(s?parseFloat(s):0)).toFixed(2)},handleRemark:function(t,e,i){return t=t.includes("\n现价")?t.split("\n现价")[0]+"\n现价：¥"+this.getTotalPrice(t,e,i):t+"\n现价：¥"+this.getTotalPrice(t,e,i)},confirm:function(){var t=this;if(0===this.selectedCount)return void this.$vux.toast.show({text:"至少选择1个商品",type:"text"});for(var e=[],i=0;i<this.goodsList.length;i++){var s={},n=this.goodsList[i];if(n.selected){var a=function(){s.remark=t.handleRemark(n.remark,n.salePrice,n.purchaseCost);var i=[];if(n.picPathsList.length<4)return t.$vux.toast.text("款号为："+n.styleNo+"只有一张图片，不允许合成，请选择至少是四张图的款号进行合成"),{v:void 0};n.picPathsList.forEach(function(t,e){e<4&&i.push(t.src)}),s.imgList=i,e.push(s)}();if("object"===(void 0===a?"undefined":o()(a)))return a.v}}this.$router.push({path:"/batchTransmit",query:{info:e}})},selectedAll:function(){var t=this;this.selectedCount>0?(this.goodsList.forEach(function(e,i){t.$set(t.goodsList[i],"selected",!1)}),this.selectedCount=0):this.goodsList.forEach(function(e,i){e.stockSum>0&&t.selectedCount<9&&(t.$set(t.goodsList[i],"selected",!0),t.selectedCount++)})}},created:function(){this.type=this.$route.query.type,this.getH5UserPurchases()},mounted:function(){this.$refs.transmitListScroller.triggerPullToRefresh()}},d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"custom-body transmit-list"},[i("div",{staticClass:"main-content"},[i("scroller",{ref:"transmitListScroller",attrs:{noDataText:"没有商品了","on-refresh":t.refresh,"on-infinite":t.infinite}},[i("div",{staticClass:"tip-bar brown"},[t._v("提示：转发时现价=销售价+标准代购价+加价")]),t._v(" "),i("group",t._l(t.goodsList,function(e,s){return i("cell",{key:s,staticClass:"item",attrs:{"border-intent":!1,"align-items":"flex-start"},nativeOn:{click:function(i){t.goodsClick(e,s)}}},[i("i",{class:["iconNH icon-checkbox",{" is-active":e.selected}],attrs:{slot:"icon"},slot:"icon"}),t._v(" "),i("div",{staticClass:"goods-info",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"goods-img cover-bg-img",style:{backgroundImage:"url("+e.firstPic+")"}},[0==e.stockSum?i("div",{staticClass:"mask-tip"},[i("p",{staticClass:"fs16 chinese"},[t._v("卖光了")]),t._v(" "),i("p",{staticClass:"fs12"},[t._v("Sold out")])]):t._e()]),t._v(" "),i("div",{staticClass:"goods-msg"},[i("p",{class:["fs13 pdb4",{"dark-gray":0==e.stockSum}]},[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"fs12 dark-gray pdb4"},[t._v("规格 "+t._s(e.goodsSpec))]),t._v(" "),i("p",{staticClass:"fs12 dark-gray pdb4"},[t._v("款式 "+t._s(e.style))]),t._v(" "),i("div",{staticClass:"fs12 dark-gray style-no"},[i("div",{staticClass:"style"},[t._v("款号"),i("span",{staticClass:"pdl4"},[t._v(t._s(e.styleNo))])]),t._v(" "),e.transmited?i("div",[i("span",{staticClass:"already-tag"},[t._v("已转发")])]):t._e()])])])])}))],1)],1),t._v(" "),i("div",{staticClass:"price"},[i("span",[t._v("转发商品加价：")]),t._v(" "),i("checker",{attrs:{type:"radio","default-item-class":"select-item blue-gray-bg light-gray","selected-item-class":"is-active"},model:{value:t.purchPrice,callback:function(e){t.purchPrice=e},expression:"purchPrice"}},t._l(t.priceList,function(e,s){return i("checker-item",{key:s,attrs:{value:e.purchaseCost}},[t._v("+￥"+t._s(e.purchaseCost)+"\n            ")])}))],1),t._v(" "),i("div",{staticClass:"footer"},[i("div",[i("span",{on:{click:t.selectedAll}},[i("i",{class:["iconNH icon-checkbox",{" is-active":this.selectedCount>0}]}),t._v(" "),i("span",{staticClass:"pdt4 pdl4"},[t._v("已勾选 "),i("span",{staticClass:"red"},[t._v(t._s(t.selectedCount))]),t._v(" 件")])])]),t._v(" "),i("div",[i("x-button",{staticClass:"btn w82",attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v("确定")])],1)])])},v=[];d._withStripped=!0;var f={render:d,staticRenderFns:v},g=f,p=!1,u=i("VU/8"),w=s,h=u(r,g,!1,w,"data-v-39c791c4",null);h.options.__file="src/views/activity/transmitList.vue";e.default=h.exports},"a0R/":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.transmit-list .weui-cells{margin:0!important\n}",""])},rBVL:function(t,e,i){var s=i("Dl2t");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("3267f6c0",s,!1,{})}});
//# sourceMappingURL=29.js.map