webpackJsonp([9],{"+NnN":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'\n.order-list .weui-cells{margin-top:2.133vw!important;content:"viewport-units-buggyfill; margin-top: 2.133vw"\n}\n.order-list .weui-btn_mini{width:21.867vw!important;content:"viewport-units-buggyfill; width: 21.867vw"\n}\n.order-list .vux-tab-wrap{position:fixed;top:12vw;left:0;z-index:2;width:100vw;content:"viewport-units-buggyfill; top: 12vw; width: 100vw"\n}\n.order-list .vux-slider{height:100%;padding-top:11.733vw;\n  /*padding-bottom: 8px;*/overflow:auto;content:"viewport-units-buggyfill; padding-top: 11.733vw"\n}\n.order-list .vux-slider .vux-swiper{height:100%!important;overflow-y:auto!important\n}',""])},"+hqa":function(t,e,i){var s=i("qWWs");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("5ffcf4f2",s,!1,{})},A230:function(t,e,i){var s=i("cRxa");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("4c8df588",s,!1,{})},EXM3:function(t,e,i){var s=i("UILi");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("3308f440",s,!1,{})},UILi:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"",""])},cRxa:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"",""])},gGXC:function(t,e,i){var s=i("+NnN");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("7eb4a46c",s,!1,{})},iarJ:function(t,e,i){"use strict";function s(t){h||(i("EXM3"),i("+hqa"))}function n(t){N||(i("gGXC"),i("A230"))}Object.defineProperty(e,"__esModule",{value:!0});var r=i("FWz8"),a=i("Xxa5"),o=i.n(a),l=i("exGp"),d=i.n(l),c=i("63CM"),u=(c.a,{props:["orderListType"],directives:{TransferDom:c.a},data:function(){return{orderId:"",isPayMethodVisible:!1,orderList:[],pageNum:0}},methods:{goPay:function(t){var e=this,i=this,s={orderId:this.orderId,payMethod:t,userId:this.$store.getters.userInfo.id};this.isPayMethodVisible=!1,Object(r.f)(s).then(function(s){if(0===s.code&&"WX_PAY"===t){if("SUCCESS"!==s.data.return_code||"SUCCESS"!==s.data.result_code)return void e.$vux.toast.show({text:"调起支付失败",type:"cancel"});var n={appid:s.data.appid,mch_id:s.data.mch_id,prepay_id:s.data.prepay_id,nonce:s.data.finalPackage.noncestr,timestamp:s.data.finalPackage.timestamp,sign:s.data.paySign};Wechat.sendPaymentRequest(n,function(){i.$vux.toast.show({text:"支付成功",onHide:function(){i.getOrderList()}})},function(t){i.$vux.toast.show({text:t,type:"cancel",onHide:function(){i.getOrderList()}})})}0===s.code&&"ALI_PAY"===t&&cordova.plugins.alipay.payment(s.data,function(t){i.$vux.toast.show({text:"支付成功",onHide:function(){i.getOrderList()}})},function(t){i.$vux.toast.show({text:"支付失败",type:"cancel",onHide:function(){i.getOrderList()}})})})},refresh:function(t){t(!0),this.pageNum=1,this.getOrderList(t)},infinite:function(t){this.pageNum++,this.getOrderList(t)},getOrderList:function(t){var e=this;return d()(o.a.mark(function i(){var s;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s={status:e.orderListType?e.orderListType:"",userId:e.$store.getters.userInfo.id,pageSize:10,pageNum:e.pageNum},i.next=3,Object(r.d)(s).then(function(i){if(0===i.code){if(0==i.data.orders.length)return 1===e.pageNum&&(e.orderList=[]),void(t&&t(!0));i.data.orders.forEach(function(t){t.goodsPicPaths&&(t.goodsPicPaths=t.goodsPicPaths.split(";"))}),e.orderList=1===e.pageNum?i.data.orders:e.orderList.concat(i.data.orders),t&&t(),console.log(e.orderListType+"订单第"+e.pageNum+"页")}});case 3:case"end":return i.stop()}},i,e)}))()},goDetail:function(t){this.$store.commit("setOrderListType",this.orderListType),this.$router.push({path:"/orderDetail",query:{id:t}})}},activated:function(){this.pageNum=1,this.getOrderList()},created:function(){}}),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("scroller",{ref:"orderListScroller",attrs:{noDataText:"好货扭起来","on-refresh":t.refresh,"on-infinite":t.infinite}},t._l(t.orderList,function(e,s){return i("group",{key:s},[i("cell",{attrs:{"border-intent":!1}},[i("div",{staticClass:"fs16",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.brandName))]),t._v(" "),i("img",{staticClass:"brand-logo",attrs:{slot:"icon",src:e.brandPicPath},slot:"icon"}),t._v(" "),"WAIT_PAY"===e.status?i("div",{staticClass:"fs14 red"},[t._v("待支付 "),i("clocker",{attrs:{format:" %M：%S",time:e.expireAt},on:{"on-finish":function(e){t.pageNum=1,t.getOrderList()}}})],1):t._e(),t._v(" "),"CANCEL"===e.status||"EXPIRE"===e.status?i("div",{staticClass:"fs14 red"},[i("div",{staticClass:"light-gray fs14"},[t._v("已取消")]),t._v(" "),i("div",{staticClass:"blue-gray fs10"},[t._v(t._s("EXPIRE"===e.status?"支付超时取消":"主动取消"))])]):t._e(),t._v(" "),"SENDED"===e.status||"WAIT_SEND"===e.status?i("div",{staticClass:"fs14 red"},[i("div",{staticClass:"light-gray fs14"},[t._v(t._s("SENDED"===e.status?"已发货":"待发货"))])]):t._e()]),t._v(" "),i("cell",{attrs:{"border-intent":!1}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",{attrs:{aspectratio:"","w-345-64":""}},[e.goodsPicPaths&&e.goodsPicPaths.length>0?i("div",{staticClass:"img-list",attrs:{"aspectratio-content":""}},t._l(e.goodsPicPaths.slice(0,5),function(s,n){return i("div",{key:n,staticClass:"item"},[i("div",{staticClass:"cover-bg-img",style:{backgroundImage:"url("+s+")"}}),t._v(" "),4===n?i("div",{staticClass:"total-mask"},[t._v("共"+t._s(e.goodsPicPaths.length)+"件\n                                ")]):t._e()])})):t._e()])])]),t._v(" "),i("div",{staticClass:"cell-box"},[i("span",{staticClass:"fs14 lh32"},[t._v("合计: ¥"+t._s((1*e.totalAmount).toFixed(2))+"（"+t._s(e.goodsSum)+"件）")]),t._v(" "),i("x-button",{staticClass:"fr",attrs:{mini:"",plain:"",type:"WAIT_PAY"===e.status?"warn":"default"},nativeOn:{click:function(i){t.goDetail(e.id)}}},[t._v("查看\n                ")]),t._v(" "),"WAIT_PAY"===e.status?i("x-button",{staticClass:"fr mgr4",attrs:{mini:"",plain:"",type:"warn"},nativeOn:{click:function(i){t.orderId=e.id,t.isPayMethodVisible=!0}}},[t._v("去支付\n                ")]):t._e()],1)],1)})),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("actionsheet",{model:{value:t.isPayMethodVisible,callback:function(e){t.isPayMethodVisible=e},expression:"isPayMethodVisible"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"refund-type-list"},[i("cell",{attrs:{"border-intent":!1,"is-link":"","popup-style":""},nativeOn:{click:function(e){t.goPay("WX_PAY")}}},[i("i",{staticClass:"iconNH icon-wxpay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),i("div",{attrs:{slot:"title"},slot:"title"},[t._v("微信支付")])]),t._v(" "),i("cell",{attrs:{"border-intent":!1,"is-link":""},nativeOn:{click:function(e){t.goPay("ALI_PAY")}}},[i("i",{staticClass:"iconNH icon-alipay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),i("div",{attrs:{slot:"title"},slot:"title"},[t._v("支付宝")])])],1)])])],1)],1)},v=[];p._withStripped=!0;var f={render:p,staticRenderFns:v},g=f,h=!1,b=i("VU/8"),m=s,w=b(u,g,!1,m,"data-v-52bb5cf4",null);w.options.__file="src/views/mine/order/components/orderList.vue";var y=w.exports,_=i("5Qen"),x={name:"orderList",data:function(){return{index:0,queryType:"",orderData:[{label:"全部",status:""},{label:"待支付",status:"WAIT_PAY"},{label:"待发货",status:"WAIT_SEND"},{label:"已发货",status:"SENDED"},{label:"已取消",status:"CANCEL"}]}},methods:{tabClick:function(t){this.queryType=t,"SENDED"!=t&&"CANCEL"!=t||Object(_.t)({userId:this.$store.getters.userInfo.id,status:t}).then(function(t){console.log(t)})},swiperChange:function(t){this.queryType=this.orderData[t].status,"SENDED"!=this.queryType&&"CANCEL"!=this.queryType||Object(_.t)({userId:this.$store.getters.userInfo.id,status:this.queryType}).then(function(t){console.log(t)})}},created:function(){this.queryType=this.$store.getters.orderListType},activated:function(){this.queryType=this.$store.getters.orderListType},components:{"order-list":y}},C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-list"},[i("tab",{attrs:{"custom-bar-width":"36px","line-width":2,"scroll-threshold":5},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.orderData,function(e,s){return i("tab-item",{key:s,staticClass:"vux-center",attrs:{selected:t.queryType==e.status},on:{"on-item-click":function(i){t.tabClick(e.status)}}},[t._v(t._s(e.label)+"\n        ")])})),t._v(" "),i("swiper",{attrs:{"min-moving-distance":100,"show-dots":!1},on:{"on-index-change":t.swiperChange},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.orderData,function(t,e){return i("swiper-item",{key:e},[i("order-list",{attrs:{orderListType:t.status}})],1)}))],1)},P=[];C._withStripped=!0;var L={render:C,staticRenderFns:P},k=L,N=!1,E=i("VU/8"),T=n,I=E(x,k,!1,T,"data-v-49cfe8af",null);I.options.__file="src/views/mine/order/index.vue";e.default=I.exports},qWWs:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'\n.order-list .brand-logo[data-v-52bb5cf4]{display:block;width:6.4vw;height:6.4vw;margin-right:2.667vw;content:"viewport-units-buggyfill; width: 6.4vw; height: 6.4vw; margin-right: 2.667vw"\n}\n.order-list [w-345-64][data-v-52bb5cf4]{width:92vw;content:"viewport-units-buggyfill; width: 92vw"\n}\n.order-list [w-345-64][data-v-52bb5cf4]:before{padding-top:18.55072463768116%\n}\n.order-list .cell-box[data-v-52bb5cf4]{padding:0 3.2vw 4.267vw;content:"viewport-units-buggyfill; padding: 0 3.2vw 4.267vw"\n}\n.order-list .img-list[data-v-52bb5cf4]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:4vw;content:"viewport-units-buggyfill; margin-bottom: 4vw"\n}\n.order-list .img-list .item[data-v-52bb5cf4]{position:relative;width:17.067vw;height:17.067vw;padding-right:0;margin-right:1.6vw;content:"viewport-units-buggyfill; width: 17.067vw; height: 17.067vw; margin-right: 1.6vw"\n}\n.order-list .img-list .item[data-v-52bb5cf4]:last-child{margin-right:0\n}\n.order-list .img-list .item .cover-bg-img[data-v-52bb5cf4]{width:100%;height:100%\n}\n.order-list .img-list .item .total-mask[data-v-52bb5cf4]{position:absolute;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;font-size:3.2vw;color:#fff;background-color:rgba(0,0,0,.5);content:"viewport-units-buggyfill; font-size: 3.2vw"\n}',""])}});
//# sourceMappingURL=9.js.map