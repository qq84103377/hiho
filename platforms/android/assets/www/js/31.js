webpackJsonp([31],{"27ql":function(t,i,e){i=t.exports=e("FZ+f")(!1),i.push([t.i,'\n.nf-scroll-container{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.nf-scroll-container .nf-scroll-view{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.align-center,.flex{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.align-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.center,.justify-center{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center\n}\n.center{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.space-between{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.navigation{height:11.733vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:99;padding:0 4.267vw;position:fixed;top:0;left:0;width:100%;background-color:#fff;border-bottom:.5px solid #d9d9d9;content:"viewport-units-buggyfill; height: 11.733vw; padding: 0 4.267vw"\n}\n.navigation .back{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.navigation .text{text-align:center;font-size:4.8vw;line-height:11.733vw;content:"viewport-units-buggyfill; font-size: 4.8vw; line-height: 11.733vw"\n}\n.navigation .right{position:absolute;right:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; right: 4.267vw"\n}\n.invalid-goods .weui-cells{margin-top:0\n}\n.invalid-goods .goods-item .weui-cell{padding-left:0\n}',""])},"CjP+":function(t,i,e){var n=e("kxFB");i=t.exports=e("FZ+f")(!1),i.push([t.i,'\n.nf-scroll-container[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column\n}\n.nf-scroll-container .nf-scroll-view[data-v-020e5484]{position:relative;-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.align-center[data-v-020e5484],.flex[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.align-center[data-v-020e5484]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.center[data-v-020e5484],.justify-center[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center\n}\n.center[data-v-020e5484]{-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.space-between[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between\n}\n.navigation[data-v-020e5484]{height:11.733vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:99;padding:0 4.267vw;position:fixed;top:0;left:0;width:100%;background-color:#fff;border-bottom:.5px solid #d9d9d9;content:"viewport-units-buggyfill; height: 11.733vw; padding: 0 4.267vw"\n}\n.navigation .back[data-v-020e5484]{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.navigation .text[data-v-020e5484]{text-align:center;font-size:4.8vw;line-height:11.733vw;content:"viewport-units-buggyfill; font-size: 4.8vw; line-height: 11.733vw"\n}\n.navigation .right[data-v-020e5484]{position:absolute;right:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; right: 4.267vw"\n}\n.invalid-goods[data-v-020e5484]{padding-top:11.733vw;content:"viewport-units-buggyfill; padding-top: 11.733vw"\n}\n.invalid-goods .header[data-v-020e5484]{background:#fff;height:11.733vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:99;padding:0 4.267vw;position:fixed;top:0;left:0;width:100%;border-bottom:1px solid #eee;content:"viewport-units-buggyfill; height: 11.733vw; padding: 0 4.267vw"\n}\n.invalid-goods .header i[data-v-020e5484]{position:absolute;left:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; left: 4.267vw"\n}\n.invalid-goods .header .title[data-v-020e5484]{text-align:center;font-size:4.8vw;line-height:11.733vw;content:"viewport-units-buggyfill; font-size: 4.8vw; line-height: 11.733vw"\n}\n.invalid-goods .header .clear-list[data-v-020e5484]{position:absolute;right:4.267vw;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:"viewport-units-buggyfill; right: 4.267vw"\n}\n.invalid-goods .goods-list[data-v-020e5484]{position:relative;height:100%;width:100%\n}\n.invalid-goods .border-b[data-v-020e5484]{border-bottom:1px solid #eee\n}\n.invalid-goods .brand-logo[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;width:6.4vw;height:6.4vw;margin-right:2.667vw;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;content:"viewport-units-buggyfill; width: 6.4vw; height: 6.4vw; margin-right: 2.667vw"\n}\n.invalid-goods .mask[data-v-020e5484]{position:absolute;left:0;top:0;width:100%;height:100%;background:hsla(0,0%,100%,.5);z-index:99\n}\n.invalid-goods .mask .mask-tip[data-v-020e5484]{padding:0 2.933vw;width:22.4vw;height:16.533vw;background:rgba(0,0,0,.5);position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:url('+n(e("KaIJ"))+') no-repeat;background-size:cover;content:"viewport-units-buggyfill; padding: 0 2.933vw; width: 22.4vw; height: 16.533vw"\n}\n.invalid-goods .mask .mask-tip.goods-down[data-v-020e5484]{background:none;width:auto;height:auto\n}\n.invalid-goods .mask .mask-tip .goods-tip[data-v-020e5484]{padding:2.667vw;background:rgba(0,0,0,.5);color:#fff;content:"viewport-units-buggyfill; padding: 2.667vw"\n}\n.invalid-goods .goods-item[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;border-bottom:1px solid #eee\n}\n.invalid-goods .goods-item .check-box[data-v-020e5484]{-webkit-box-flex:0;-ms-flex:0 0 14.4vw;flex:0 0 14.4vw;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"viewport-units-buggyfill; -ms-flex: 0 0 14.4vw; flex: 0 0 14.4vw"\n}\n.invalid-goods .goods-item .goods-main[data-v-020e5484]{-webkit-box-flex:1;-ms-flex:1;flex:1\n}\n.invalid-goods .goods-item .goods-main .goods-img[data-v-020e5484]{display:block;width:21.867vw;height:21.867vw;margin-right:2.667vw;content:"viewport-units-buggyfill; width: 21.867vw; height: 21.867vw; margin-right: 2.667vw"\n}\n.invalid-goods .goods-item .goods-main .good-msg .goods-name[data-v-020e5484]{font-size:3.467vw;vertical-align:top;padding-bottom:2.133vw;content:"viewport-units-buggyfill; font-size: 3.467vw; padding-bottom: 2.133vw"\n}\n.invalid-goods .goods-item .goods-main .goods-price[data-v-020e5484]{font-size:3.733vw;color:#f83149;margin-top:22.4vw;content:"viewport-units-buggyfill; font-size: 3.733vw; margin-top: 22.4vw"\n}\n.invalid-goods .goods-item .goods-main .order-remark[data-v-020e5484]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:3.2vw;margin:0 4.267vw 3.2vw 0;padding:1.6vw 2.133vw;color:#9898a1;background-color:#fafafa;content:"viewport-units-buggyfill; font-size: 3.2vw; margin: 0 4.267vw 3.2vw 0; padding: 1.6vw 2.133vw"\n}\n.invalid-goods .goods-item .goods-main .order-remark .icon-mine_info-edit[data-v-020e5484]{font-size:3.2vw;content:"viewport-units-buggyfill; font-size: 3.2vw"\n}\n.invalid-goods .goods-item .goods-main .icon-cart_dropdown-s[data-v-020e5484]{font-size:2.133vw!important;margin-left:1.333vw;content:"viewport-units-buggyfill; font-size: 2.133vw; margin-left: 1.333vw"\n}\n.invalid-goods .goods-item .goods-main .size-list[data-v-020e5484]{position:relative;width:76.8vw;padding:1.333vw 2.4vw;margin:0 auto 2.667vw;background-color:#fafafa;content:"viewport-units-buggyfill; width: 76.8vw; padding: 1.333vw 2.4vw; margin: 0 auto 2.667vw"\n}\n.invalid-goods .goods-item .goods-main .size-list[data-v-020e5484]:before{content:"";position:absolute;z-index:2;top:-2.133vw;left:26.667vw;border-left:2.667vw solid transparent;border-right:2.667vw solid transparent;border-bottom:2.667vw solid #fafafa\n}\n.invalid-goods .goods-item .goods-main .size-list .select-item[data-v-020e5484]{font-size:2.667vw;text-align:center;min-width:19.467vw;padding:0 2.133vw;line-height:6.4vw;margin-bottom:1.6vw;margin-right:1.067vw;content:"viewport-units-buggyfill; font-size: 2.667vw; min-width: 19.467vw; padding: 0 2.133vw; line-height: 6.4vw; margin-bottom: 1.6vw; margin-right: 1.067vw"\n}\n.invalid-goods .goods-item .goods-main .size-list .select-item.is-active[data-v-020e5484]{color:#fff!important;background-color:#797988\n}\n.invalid-goods .btn-group[data-v-020e5484]{padding:2.133vw 4.267vw;border-bottom:1px solid #eee;text-align:right;content:"viewport-units-buggyfill; padding: 2.133vw 4.267vw"\n}\n.invalid-goods .btn-group .action-btn[data-v-020e5484]{width:23.467vw;padding:0;content:"viewport-units-buggyfill; width: 23.467vw"\n}\n.invalid-goods .footer[data-v-020e5484]{font-size:3.2vw;border-top:1px solid #eee;padding:2.133vw 4.267vw;position:fixed;background:#fff;z-index:99;bottom:0;left:0;width:100%;text-align:right;content:"viewport-units-buggyfill; font-size: 3.2vw; padding: 2.133vw 4.267vw"\n}\n.invalid-goods .footer .footer-tip[data-v-020e5484]{line-height:8.533vw;float:left;content:"viewport-units-buggyfill; line-height: 8.533vw"\n}\n.invalid-goods .footer .action-btn[data-v-020e5484]{width:26.133vw;float:right;content:"viewport-units-buggyfill; width: 26.133vw"\n}\n.invalid-goods .footer .action-btn[data-v-020e5484]:nth-child(3){margin-right:1.333vw;content:"viewport-units-buggyfill; margin-right: 1.333vw"\n}',""])},Y9Ad:function(t,i,e){var n=e("27ql");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("27ffa826",n,!1,{})},idEU:function(t,i,e){var n=e("CjP+");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("c186773c",n,!1,{})},xUg2:function(t,i,e){"use strict";function n(t){h||(e("Y9Ad"),e("idEU"))}Object.defineProperty(i,"__esModule",{value:!0});var o=e("Dd8w"),a=e.n(o),s=e("Xxa5"),l=e.n(s),d=e("exGp"),r=e.n(d),c=e("63CM"),v=e("c+FZ"),g=e("Ty/O"),p=(c.a,{name:"invalid-goods",directives:{TransferDom:c.a},data:function(){return{demo1Checkbox:0,invalidList:[],delPop:!1,addPop:!1,delGoodsParams:[],addShoprCarList:{},count:0,pageNum:0,invalidNum:0}},computed:{selectNum:function(){this.invalidNum=0;for(var t=0,i=[],e=[],n=0;n<this.invalidList.length;n++){for(var o=0,a=0;a<this.invalidList[n].shopCartItem.length;a++)this.invalidList[n].shopCartItem[a].check&&(e.push({userId:this.$store.getters.userInfo.id,goodsId:this.invalidList[n].shopCartItem[a].goodsId,goodsSpecId:this.invalidList[n].shopCartItem[a].goodsSpecId,remark:this.invalidList[n].shopCartItem[a].remark,goodsShopCartId:this.invalidList[n].shopCartItem[a].goodsShopCartId}),0!=this.invalidList[n].shopCartItem[a].stock&&1!=this.invalidList[n].shopCartItem[a].goodsStatus||this.invalidNum++,t++,o++,i.push(this.invalidList[n].shopCartItem[a].goodsShopCartId));this.$set(this.invalidList[n],"check",o>=this.invalidList[n].shopCartItem.length)}return this.delPop||(this.delGoodsParams=i,this.addShoprCarList={goodsShopCartParams:e}),t}},methods:{refresh:function(t){var i=this;return r()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),i.pageNum=1,e.next=4,i.getInvalidList(t);case 4:case"end":return e.stop()}},e,i)}))()},infinite:function(t){var i=this;return r()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.pageNum++,e.next=3,i.getInvalidList(t);case 3:case"end":return e.stop()}},e,i)}))()},addShopcar:function(){var t=this;Object(g.a)(this.addShoprCarList).then(function(i){0==i.code&&(t.pageNum=1,t.getInvalidList(),t.$store.dispatch("getCartNum",t.$store.getters.userInfo.id),t.show=!1,t.$vux.toast.show({type:"text",text:"加入进货车成功"}))})},goodsAddShopcar:function(t,i,e){this.addPop=!0,this.addShoprCarList={goodsShopCartParams:[a()({},t,{userId:this.$store.getters.userInfo.id})]}},allDel:function(){this.delPop=!0;for(var t=[],i=0;i<this.invalidList.length;i++)for(var e=0;e<this.invalidList[i].shopCartItem.length;e++)t.push(this.invalidList[i].shopCartItem[e].goodsShopCartId);this.delGoodsParams=t},itemDel:function(t){this.delPop=!0,this.delGoodsParams=[],this.delGoodsParams.push(t.goodsShopCartId),console.log(this.delGoodsParams)},batchAdd:function(){if(this.selectNum)return this.invalidNum?void this.$vux.toast.show({type:"text",text:"请选择有库存或已上架的商品进行购买"}):void(this.addPop=!0)},batchDel:function(){this.selectNum&&(this.delPop=!0)},delGoods:function(t){var i=this;console.log(t),Object(v.b)(t).then(function(t){0===t.code&&(i.pageNum=1,i.getInvalidList())})},selectBrand:function(t){this.$set(t,"check",!t.check);for(var i=0;i<t.shopCartItem.length;i++)this.$set(t.shopCartItem[i],"check",t.check)},selectGoods:function(t){this.$set(t,"check",!t.check)},selectSpec:function(t,i){t.goodsSpecId=i.id,t.goodsSpecName=i.name},getSpecList:function(t){var i=this;if(console.log(t),this.$set(t,"show",!t.show),!t.specList){var e={goodsId:t.goodsId};Object(v.e)(e).then(function(e){console.log(e.data.goodsSpecSimpleParamList),i.$set(t,"specList",e.data.goodsSpecSimpleParamList)})}},getInvalidList:function(t){var i=this;return r()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:i.$store.getters.userInfo.id,pageSize:10,pageNum:i.pageNum},e.next=3,Object(v.f)(n).then(function(e){if(0===e.code){if(0==e.data.shopCartBrandUnits.length&&(1===i.pageNum&&(i.invalidLis=[]),t))return t(!0);i.count=e.data.totalSpecNum,i.invalidList=1===i.pageNum?e.data.shopCartBrandUnits:i.invalidList.concat(e.data.shopCartBrandUnits),t&&t(),console.log("失效第"+i.pageNum+"页"),console.log(i.invalidList.length,e.data.totalCount)}});case 3:case"end":return e.stop()}},e,i)}))()}},created:function(){}}),f=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invalid-goods"},[e("div",{staticClass:"header black"},[e("i",{staticClass:"icon-back",on:{click:function(i){t.$router.go(-1)}}}),t._v(" "),e("div",{staticClass:"title"},[t._v("失效商品清单("+t._s(t.count)+")")]),t._v(" "),e("div",{staticClass:"clear-list fs16",on:{click:t.allDel}},[t._v("清空列表")])]),t._v(" "),e("div",{staticClass:"goods-list"},[e("scroller",{ref:"invalidGoodsScroller",staticClass:"scroller-top",attrs:{noDataText:"好货扭起来","on-refresh":t.refresh,"on-infinite":t.infinite}},[e("div",t._l(t.invalidList,function(i,n){return e("group",{key:n},[e("div",{staticClass:"border-b"},[e("cell",{attrs:{"border-intent":!1}},[e("div",{staticClass:"fs16",attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.brandName))]),t._v(" "),e("div",{staticClass:"brand-logo",attrs:{slot:"icon"},slot:"icon"},[e("i",{class:["icon-checkbox",{"is-active":i.check}],on:{click:function(e){t.selectBrand(i)}}})])])],1),t._v(" "),t._l(i.shopCartItem,function(n,o){return e("div",{key:o,staticStyle:{position:"relative"}},[1==n.goodsStatus?e("div",{staticClass:"mask"},[e("div",{staticClass:"mask-tip goods-down"},[e("div",{staticClass:"goods-tip"},[t._v("已下架")])])]):0==n.goodsStatus&&0==n.stock?e("div",{staticClass:"mask"},[e("div",{staticClass:"mask-tip"})]):t._e(),t._v(" "),e("div",{staticClass:"goods-item"},[e("div",{staticClass:"check-box"},[e("i",{class:["icon-checkbox",{"is-active":n.check}],on:{click:function(i){t.selectGoods(n)}}})]),t._v(" "),e("div",{staticClass:"goods-main"},[e("cell",{staticStyle:{position:"relative"},attrs:{"border-intent":!1}},[e("div",{staticClass:"goods-img cover-bg-img",style:{backgroundImage:"url("+n.goodsImage+")"},attrs:{slot:"icon"},slot:"icon"}),t._v(" "),e("div",{staticClass:"good-msg",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"goods-name"},[t._v(t._s(n.goodsName))]),t._v(" "),e("div",{staticClass:"fs12 dark-gray pdb4"},[t._v("款式"),e("span",{staticClass:"pdl4"},[t._v(t._s(n.style))])]),t._v(" "),e("div",{staticClass:"fs12 dark-gray pdb4"},[t._v("款号"),e("span",{staticClass:"pdl4"},[t._v(t._s(n.styleNo))])]),t._v(" "),e("div",[e("x-button",{staticClass:"tag-btn select-size-btn",attrs:{mini:""},nativeOn:{click:function(i){t.getSpecList(n)}}},[e("span",[t._v(t._s(n.goodsSpecName))]),e("i",{staticClass:"icon-dropdown",staticStyle:{display:"inline-block"}})])],1)]),t._v(" "),e("div",{staticClass:"goods-price"},[t._v("￥"+t._s(n.salePrice))])]),t._v(" "),e("checker",{directives:[{name:"show",rawName:"v-show",value:n.show,expression:"$item.show"}],staticClass:"size-list",attrs:{type:"radio","default-item-class":"select-item blue-gray-bg light-gray","selected-item-class":"is-active"}},t._l(n.specList,function(i,o){return i.stock?e("checker-item",{key:o,attrs:{value:i.id},on:{"on-item-click":function(e){t.selectSpec(n,i)}}},[t._v("\n                                       "+t._s(i.name)+"\n                                   ")]):t._e()})),t._v(" "),e("div",{staticClass:"order-remark"},[e("span",[t._v("备注: "+t._s(n.remark?n.remark:"暂无备注"))])])],1)]),t._v(" "),e("div",{staticClass:"btn-group"},[e("x-button",{staticClass:"action-btn",attrs:{mini:"",type:"warn",plain:!0},nativeOn:{click:function(i){t.itemDel(n)}}},[t._v("\n                               清除\n                           ")]),t._v(" "),e("x-button",{staticClass:"action-btn",staticStyle:{"margin-top":"0"},attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){t.goodsAddShopcar(n,o,i)}}},[t._v("重新购买\n                           ")])],1)])})],2)}))])],1),t._v(" "),e("div",{staticClass:"footer dark-gray"},[e("span",{staticClass:"footer-tip"},[t._v("已勾选"+t._s(t.selectNum)+"件")]),t._v(" "),e("x-button",{staticClass:"action-btn",attrs:{mini:"",type:"primary"},nativeOn:{click:function(i){return t.batchAdd(i)}}},[t._v("重新购买")]),t._v(" "),e("x-button",{staticClass:"action-btn",staticStyle:{"margin-top":"0"},attrs:{mini:"",type:"warn",plain:!0},nativeOn:{click:function(i){return t.batchDel(i)}}},[t._v("\n            清除\n        ")])],1),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("confirm",{attrs:{"dialog-transition":"",title:"确定清除商品?"},on:{"on-cancel":function(i){t.delPop=!1},"on-confirm":function(i){t.delGoods(t.delGoodsParams)}},model:{value:t.delPop,callback:function(i){t.delPop=i},expression:"delPop"}})],1),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("confirm",{attrs:{"dialog-transition":"",title:"确定加入进货车?"},on:{"on-cancel":function(i){t.addPop=!1},"on-confirm":t.addShopcar},model:{value:t.addPop,callback:function(i){t.addPop=i},expression:"addPop"}})],1)])},w=[];f._withStripped=!0;var m={render:f,staticRenderFns:w},u=m,h=!1,b=e("VU/8"),x=n,k=b(p,u,!1,x,"data-v-020e5484",null);k.options.__file="src/views/cart/invalidGoods.vue";i.default=k.exports}});
//# sourceMappingURL=31.js.map