webpackJsonp([8],{"2SbS":function(t,i,e){var s=e("EBys");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("4cd6c92d",s,!0,{})},EBys:function(t,i,e){i=t.exports=e("FZ+f")(!0),i.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},"FA+V":function(t,i,e){i=t.exports=e("FZ+f")(!0),i.push([t.i,'\n.order-list .brand-logo[data-v-770f063b]{display:block;width:6.4vw;height:6.4vw;margin-right:2.667vw;content:"viewport-units-buggyfill; width: 6.4vw; height: 6.4vw; margin-right: 2.667vw"\n}\n.order-list [w-345-64][data-v-770f063b]{width:92vw;content:"viewport-units-buggyfill; width: 92vw"\n}\n.order-list [w-345-64][data-v-770f063b]:before{padding-top:18.55072463768116%\n}\n.order-list .cell-box[data-v-770f063b]{padding:0 3.2vw 4.267vw;content:"viewport-units-buggyfill; padding: 0 3.2vw 4.267vw"\n}\n.order-list .img-list[data-v-770f063b]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:4vw;content:"viewport-units-buggyfill; margin-bottom: 4vw"\n}\n.order-list .img-list .item[data-v-770f063b]{position:relative;width:17.067vw;height:17.067vw;padding-right:0;margin-right:1.6vw;content:"viewport-units-buggyfill; width: 17.067vw; height: 17.067vw; margin-right: 1.6vw"\n}\n.order-list .img-list .item[data-v-770f063b]:last-child{margin-right:0\n}\n.order-list .img-list .item .cover-bg-img[data-v-770f063b]{width:100%;height:100%\n}\n.order-list .img-list .item .total-mask[data-v-770f063b]{position:absolute;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;font-size:3.2vw;color:#fff;background-color:rgba(0,0,0,.5);content:"viewport-units-buggyfill; font-size: 3.2vw"\n}',"",{version:3,sources:["/Users/glay/IdeaProjects/hiho-mobile/src/views/mine/order/components/orderList.vue"],names:[],mappings:";AACA,yCAAyC,cAAc,YAAY,aAAa,qBAAqB,sFAAsF;CAC1L;AACD,wCAAwC,WAAW,+CAA+C;CACjG;AACD,+CAA+C,8BAA8B;CAC5E;AACD,uCAAuC,wBAAwB,4DAA4D;CAC1H;AACD,uCAAuC,oBAAoB,oBAAoB,aAAa,kBAAkB,sDAAsD;CACnK;AACD,6CAA6C,kBAAkB,eAAe,gBAAgB,gBAAgB,mBAAmB,0FAA0F;CAC1N;AACD,wDAAwD,cAAc;CACrE;AACD,2DAA2D,WAAW,WAAW;CAChF;AACD,yDAAyD,kBAAkB,OAAO,MAAM,oBAAoB,oBAAoB,aAAa,yBAAyB,sBAAsB,mBAAmB,wBAAwB,qBAAqB,uBAAuB,WAAW,YAAY,gBAAgB,WAAW,gCAAgC,oDAAoD;CACxZ",file:"orderList.vue",sourcesContent:['\n.order-list .brand-logo[data-v-770f063b]{display:block;width:6.4vw;height:6.4vw;margin-right:2.667vw;content:"viewport-units-buggyfill; width: 6.4vw; height: 6.4vw; margin-right: 2.667vw"\n}\n.order-list [w-345-64][data-v-770f063b]{width:92vw;content:"viewport-units-buggyfill; width: 92vw"\n}\n.order-list [w-345-64][data-v-770f063b]:before{padding-top:18.55072463768116%\n}\n.order-list .cell-box[data-v-770f063b]{padding:0 3.2vw 4.267vw;content:"viewport-units-buggyfill; padding: 0 3.2vw 4.267vw"\n}\n.order-list .img-list[data-v-770f063b]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:4vw;content:"viewport-units-buggyfill; margin-bottom: 4vw"\n}\n.order-list .img-list .item[data-v-770f063b]{position:relative;width:17.067vw;height:17.067vw;padding-right:0;margin-right:1.6vw;content:"viewport-units-buggyfill; width: 17.067vw; height: 17.067vw; margin-right: 1.6vw"\n}\n.order-list .img-list .item[data-v-770f063b]:last-child{margin-right:0\n}\n.order-list .img-list .item .cover-bg-img[data-v-770f063b]{width:100%;height:100%\n}\n.order-list .img-list .item .total-mask[data-v-770f063b]{position:absolute;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;font-size:3.2vw;color:#fff;background-color:rgba(0,0,0,.5);content:"viewport-units-buggyfill; font-size: 3.2vw"\n}'],sourceRoot:""}])},Gn0w:function(t,i,e){var s=e("RtpN");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("4ef3f94b",s,!0,{})},HUC4:function(t,i,e){i=t.exports=e("FZ+f")(!0),i.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"orderList.vue",sourceRoot:""}])},LjMP:function(t,i,e){var s=e("HUC4");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("a75207b4",s,!0,{})},RtpN:function(t,i,e){i=t.exports=e("FZ+f")(!0),i.push([t.i,'\n.order-list .weui-cells{margin-top:2.133vw!important;content:"viewport-units-buggyfill; margin-top: 2.133vw"\n}\n.order-list .weui-btn_mini{width:21.867vw!important;content:"viewport-units-buggyfill; width: 21.867vw"\n}\n.order-list .vux-tab-wrap{position:fixed;top:12vw;left:0;z-index:2;width:100vw;content:"viewport-units-buggyfill; top: 12vw; width: 100vw"\n}\n.order-list .vux-slider{height:100%;padding-top:11.733vw;\n  /*padding-bottom: 8px;*/overflow:auto;content:"viewport-units-buggyfill; padding-top: 11.733vw"\n}\n.order-list .vux-slider .vux-swiper{height:100%!important;overflow-y:auto!important\n}',"",{version:3,sources:["/Users/glay/IdeaProjects/hiho-mobile/src/views/mine/order/index.vue"],names:[],mappings:";AACA,wBAAwB,6BAA6B,uDAAuD;CAC3G;AACD,2BAA2B,yBAAyB,mDAAmD;CACtG;AACD,0BAA0B,eAAe,SAAS,OAAO,UAAU,YAAY,2DAA2D;CACzI;AACD,wBAAwB,YAAY,qBAAqB;EACvD,wBAAwB,cAAc,yDAAyD;CAChG;AACD,oCAAoC,sBAAsB,yBAAyB;CAClF",file:"index.vue",sourcesContent:['\n.order-list .weui-cells{margin-top:2.133vw!important;content:"viewport-units-buggyfill; margin-top: 2.133vw"\n}\n.order-list .weui-btn_mini{width:21.867vw!important;content:"viewport-units-buggyfill; width: 21.867vw"\n}\n.order-list .vux-tab-wrap{position:fixed;top:12vw;left:0;z-index:2;width:100vw;content:"viewport-units-buggyfill; top: 12vw; width: 100vw"\n}\n.order-list .vux-slider{height:100%;padding-top:11.733vw;\n  /*padding-bottom: 8px;*/overflow:auto;content:"viewport-units-buggyfill; padding-top: 11.733vw"\n}\n.order-list .vux-slider .vux-swiper{height:100%!important;overflow-y:auto!important\n}'],sourceRoot:""}])},iarJ:function(t,i,e){"use strict";function s(t){e("LjMP"),e("t4hO")}function n(t){e("Gn0w"),e("2SbS")}Object.defineProperty(i,"__esModule",{value:!0});var o=e("FWz8"),r=e("Xxa5"),a=e.n(r),l=e("exGp"),d=e.n(l),c=e("63CM"),u=(c.a,{props:["orderListType"],directives:{TransferDom:c.a},data:function(){return{orderId:"",isPayMethodVisible:!1,orderList:[],pageNum:0}},methods:{goPay:function(t){var i=this,e=this,s={orderId:this.orderId,payMethod:t,userId:this.$store.getters.userInfo.id};this.isPayMethodVisible=!1,Object(o.f)(s).then(function(s){if(0===s.code&&"WX_PAY"===t){if("SUCCESS"!==s.data.return_code||"SUCCESS"!==s.data.result_code)return void i.$vux.toast.show({text:"调起支付失败",type:"cancel"});var n={appid:s.data.appid,mch_id:s.data.mch_id,prepay_id:s.data.prepay_id,nonce:s.data.finalPackage.noncestr,timestamp:s.data.finalPackage.timestamp,sign:s.data.paySign};Wechat.sendPaymentRequest(n,function(){e.$vux.toast.show({text:"支付成功",onHide:function(){e.getOrderList()}})},function(t){e.$vux.toast.show({text:t,type:"cancel",onHide:function(){e.getOrderList()}})})}0===s.code&&"ALI_PAY"===t&&cordova.plugins.alipay.payment(s.data,function(t){e.$vux.toast.show({text:"支付成功",onHide:function(){e.getOrderList()}})},function(t){e.$vux.toast.show({text:"支付失败",type:"cancel",onHide:function(){e.getOrderList()}})})})},refresh:function(t){t(!0),this.pageNum=1,this.getOrderList(t)},infinite:function(t){this.pageNum++,this.getOrderList(t)},getOrderList:function(t){var i=this;return d()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={status:i.orderListType?i.orderListType:"",userId:i.$store.getters.userInfo.id,pageSize:10,pageNum:i.pageNum},e.next=3,Object(o.d)(s).then(function(e){if(0===e.code){if(0==e.data.orders.length)return 1===i.pageNum&&(i.orderList=[]),void(t&&t(!0));e.data.orders.forEach(function(t){t.goodsPicPaths&&(t.goodsPicPaths=t.goodsPicPaths.split(";"))}),i.orderList=1===i.pageNum?e.data.orders:i.orderList.concat(e.data.orders),t&&t(),console.log(i.orderListType+"订单第"+i.pageNum+"页")}});case 3:case"end":return e.stop()}},e,i)}))()},goDetail:function(t){this.$store.commit("setOrderListType",this.orderListType),this.$router.push({path:"/orderDetail",query:{id:t}})}},activated:function(){this.pageNum=1,this.getOrderList()},created:function(){}}),v=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("scroller",{ref:"orderListScroller",attrs:{noDataText:"好货扭起来","on-refresh":t.refresh,"on-infinite":t.infinite}},t._l(t.orderList,function(i,s){return e("group",{key:s},[e("cell",{attrs:{"border-intent":!1}},[e("div",{staticClass:"fs16",attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.brandName))]),t._v(" "),e("img",{staticClass:"brand-logo",attrs:{slot:"icon",src:i.brandPicPath},slot:"icon"}),t._v(" "),"WAIT_PAY"===i.status?e("div",{staticClass:"fs14 red"},[t._v("待支付 "),e("clocker",{attrs:{format:" %M：%S",time:i.expireAt},on:{"on-finish":function(i){t.pageNum=1,t.getOrderList()}}})],1):t._e(),t._v(" "),"CANCEL"===i.status||"EXPIRE"===i.status?e("div",{staticClass:"fs14 red"},[e("div",{staticClass:"light-gray fs14"},[t._v("已取消")]),t._v(" "),e("div",{staticClass:"blue-gray fs10"},[t._v(t._s("EXPIRE"===i.status?"支付超时取消":"主动取消"))])]):t._e(),t._v(" "),"SENDED"===i.status||"WAIT_SEND"===i.status?e("div",{staticClass:"fs14 red"},[e("div",{staticClass:"light-gray fs14"},[t._v(t._s("SENDED"===i.status?"已发货":"待发货"))])]):t._e()]),t._v(" "),e("cell",{attrs:{"border-intent":!1}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{attrs:{aspectratio:"","w-345-64":""}},[i.goodsPicPaths&&i.goodsPicPaths.length>0?e("div",{staticClass:"img-list",attrs:{"aspectratio-content":""}},t._l(i.goodsPicPaths.slice(0,5),function(s,n){return e("div",{key:n,staticClass:"item"},[e("div",{staticClass:"cover-bg-img",style:{backgroundImage:"url("+s+")"}}),t._v(" "),4===n?e("div",{staticClass:"total-mask"},[t._v("共"+t._s(i.goodsPicPaths.length)+"件\n                                ")]):t._e()])})):t._e()])])]),t._v(" "),e("div",{staticClass:"cell-box"},[e("span",{staticClass:"fs14 lh32"},[t._v("合计: ¥"+t._s((1*i.totalAmount).toFixed(2))+"（"+t._s(i.goodsSum)+"件）")]),t._v(" "),e("x-button",{staticClass:"fr",attrs:{mini:"",plain:"",type:"WAIT_PAY"===i.status?"warn":"default"},nativeOn:{click:function(e){t.goDetail(i.id)}}},[t._v("查看\n                ")]),t._v(" "),"WAIT_PAY"===i.status?e("x-button",{staticClass:"fr mgr4",attrs:{mini:"",plain:"",type:"warn"},nativeOn:{click:function(e){t.orderId=i.id,t.isPayMethodVisible=!0}}},[t._v("去支付\n                ")]):t._e()],1)],1)})),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("actionsheet",{model:{value:t.isPayMethodVisible,callback:function(i){t.isPayMethodVisible=i},expression:"isPayMethodVisible"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"refund-type-list"},[e("cell",{attrs:{"border-intent":!1,"is-link":"","popup-style":""},nativeOn:{click:function(i){t.goPay("WX_PAY")}}},[e("i",{staticClass:"iconNH icon-wxpay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"title"},slot:"title"},[t._v("微信支付")])]),t._v(" "),e("cell",{attrs:{"border-intent":!1,"is-link":""},nativeOn:{click:function(i){t.goPay("ALI_PAY")}}},[e("i",{staticClass:"iconNH icon-alipay mgr16",attrs:{slot:"icon"},slot:"icon"}),t._v(" "),e("div",{attrs:{slot:"title"},slot:"title"},[t._v("支付宝")])])],1)])])],1)],1)},A=[],g={render:v,staticRenderFns:A},p=g,f=e("VU/8"),w=s,h=f(u,p,!1,w,"data-v-770f063b",null),m=h.exports,b=e("5Qen"),y={name:"orderList",data:function(){return{index:0,queryType:"",orderData:[{label:"全部",status:""},{label:"待支付",status:"WAIT_PAY"},{label:"待发货",status:"WAIT_SEND"},{label:"已发货",status:"SENDED"},{label:"已取消",status:"CANCEL"}]}},methods:{tabClick:function(t){this.queryType=t,"SENDED"!=t&&"CANCEL"!=t||Object(b.t)({userId:this.$store.getters.userInfo.id,status:t}).then(function(t){console.log(t)})},swiperChange:function(t){this.queryType=this.orderData[t].status,"SENDED"!=this.queryType&&"CANCEL"!=this.queryType||Object(b.t)({userId:this.$store.getters.userInfo.id,status:this.queryType}).then(function(t){console.log(t)})}},created:function(){this.queryType=this.$store.getters.orderListType},activated:function(){this.queryType=this.$store.getters.orderListType},components:{"order-list":m}},C=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"order-list"},[e("tab",{attrs:{"custom-bar-width":"36px","line-width":2,"scroll-threshold":5},model:{value:t.index,callback:function(i){t.index=i},expression:"index"}},t._l(t.orderData,function(i,s){return e("tab-item",{key:s,staticClass:"vux-center",attrs:{selected:t.queryType==i.status},on:{"on-item-click":function(e){t.tabClick(i.status)}}},[t._v(t._s(i.label)+"\n        ")])})),t._v(" "),e("swiper",{attrs:{"min-moving-distance":100,"show-dots":!1},on:{"on-index-change":t.swiperChange},model:{value:t.index,callback:function(i){t.index=i},expression:"index"}},t._l(t.orderData,function(t,i){return e("swiper-item",{key:i},[e("order-list",{attrs:{orderListType:t.status}})],1)}))],1)},x=[],_={render:C,staticRenderFns:x},B=_,D=e("VU/8"),k=n,P=D(y,B,!1,k,"data-v-748d5072",null);i.default=P.exports},t4hO:function(t,i,e){var s=e("FA+V");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("32cdbc60",s,!0,{})}});
//# sourceMappingURL=8.js.map